generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model auth_group {
  id                     Int                      @id @default(autoincrement())
  name                   String                   @unique @db.VarChar(150)
  auth_group_permissions auth_group_permissions[]
  vas_users_groups       vas_users_groups[]

  @@index([name], map: "auth_group_name_a6ea08ec_like")
}

/// This model has constraints using non-default deferring rules and requires additional setup for migrations. Visit https://pris.ly/d/constraint-deferring for more info.
model auth_group_permissions {
  id              BigInt          @id @default(autoincrement())
  group_id        Int
  permission_id   Int
  auth_permission auth_permission @relation(fields: [permission_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "auth_group_permissio_permission_id_84c5c92e_fk_auth_perm")
  auth_group      auth_group      @relation(fields: [group_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "auth_group_permissions_group_id_b120cbf9_fk_auth_group_id")

  @@unique([group_id, permission_id], map: "auth_group_permissions_group_id_permission_id_0cd325b0_uniq")
  @@index([group_id], map: "auth_group_permissions_group_id_b120cbf9")
  @@index([permission_id], map: "auth_group_permissions_permission_id_84c5c92e")
}

/// This model has constraints using non-default deferring rules and requires additional setup for migrations. Visit https://pris.ly/d/constraint-deferring for more info.
model auth_permission {
  id                         Int                          @id @default(autoincrement())
  name                       String                       @db.VarChar(255)
  content_type_id            Int
  codename                   String                       @db.VarChar(100)
  auth_group_permissions     auth_group_permissions[]
  django_content_type        django_content_type          @relation(fields: [content_type_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "auth_permission_content_type_id_2f476e4b_fk_django_co")
  vas_users_user_permissions vas_users_user_permissions[]

  @@unique([content_type_id, codename], map: "auth_permission_content_type_id_codename_01ab375a_uniq")
  @@index([content_type_id], map: "auth_permission_content_type_id_2f476e4b")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model has constraints using non-default deferring rules and requires additional setup for migrations. Visit https://pris.ly/d/constraint-deferring for more info.
model django_admin_log {
  id                  Int                  @id @default(autoincrement())
  action_time         DateTime             @db.Timestamptz(6)
  object_id           String?
  object_repr         String               @db.VarChar(200)
  action_flag         Int                  @db.SmallInt
  change_message      String
  content_type_id     Int?
  user_id             BigInt
  django_content_type django_content_type? @relation(fields: [content_type_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "django_admin_log_content_type_id_c4bce8eb_fk_django_co")
  vas_users           vas_users            @relation(fields: [user_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "django_admin_log_user_id_c564eba6_fk_vas_users_id")

  @@index([content_type_id], map: "django_admin_log_content_type_id_c4bce8eb")
  @@index([user_id], map: "django_admin_log_user_id_c564eba6")
}

model django_content_type {
  id               Int                @id @default(autoincrement())
  app_label        String             @db.VarChar(100)
  model            String             @db.VarChar(100)
  auth_permission  auth_permission[]
  django_admin_log django_admin_log[]

  @@unique([app_label, model], map: "django_content_type_app_label_model_76bd3d3b_uniq")
}

model django_migrations {
  id      BigInt   @id @default(autoincrement())
  app     String   @db.VarChar(255)
  name    String   @db.VarChar(255)
  applied DateTime @db.Timestamptz(6)
}

model django_session {
  session_key  String   @id @db.VarChar(40)
  session_data String
  expire_date  DateTime @db.Timestamptz(6)

  @@index([expire_date], map: "django_session_expire_date_a5c62663")
  @@index([session_key], map: "django_session_session_key_c0390e0f_like")
}

/// This model has constraints using non-default deferring rules and requires additional setup for migrations. Visit https://pris.ly/d/constraint-deferring for more info.
model vas_data_packages {
  id           BigInt       @id @default(autoincrement())
  data_code    String       @unique @db.VarChar(100)
  tariff_id    String?      @db.VarChar(100)
  amount       Decimal      @db.Decimal(12, 2)
  description  String
  duration     String       @db.VarChar(100)
  value        String       @db.VarChar(100)
  network        String       @db.VarChar(100)
  plan_name        String       @db.VarChar(100)
  short_desc        String       @db.VarChar(100)
  payvantage_code        String       @db.VarChar(100)
  creditswitch_code        String       @db.VarChar(100)
  is_active    Boolean
  created_at   DateTime?    @db.Timestamptz(6)
  updated_at   DateTime?    @db.Timestamptz(6)
  product_id   BigInt
  vas_products vas_products @relation(fields: [product_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "vas_data_packages_product_id_998fafbd_fk_vas_products_id")

  @@index([product_id, is_active, data_code], map: "vas_data_pa_product_7a9b5e_idx")
  @@index([data_code], map: "vas_data_packages_data_code_35729ab9_like")
  @@index([product_id], map: "vas_data_packages_product_id_998fafbd")
}

/// This model has constraints using non-default deferring rules and requires additional setup for migrations. Visit https://pris.ly/d/constraint-deferring for more info.
model vas_merchant_discount {
  id                                                    BigInt        @id @default(autoincrement())
  discount_type                                         String        @db.VarChar(100)
  discount_value                                        Float
  created_at                                            DateTime?     @db.Timestamptz(6)
  updated_at                                            DateTime      @db.Timestamptz(6)
  is_active                                             Boolean
  created_by                                            BigInt?
  merchant_id                                           BigInt
  product_id                                            BigInt
  updated_by                                            BigInt?
  vas_users_vas_merchant_discount_created_byTovas_users vas_users?    @relation("vas_merchant_discount_created_byTovas_users", fields: [created_by], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "vas_merchant_discount_created_by_e2156440_fk_vas_users_id")
  vas_merchants                                         vas_merchants @relation(fields: [merchant_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "vas_merchant_discount_merchant_id_1c1b1e69_fk_vas_merchants_id")
  vas_products                                          vas_products  @relation(fields: [product_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "vas_merchant_discount_product_id_9b8982ec_fk_vas_products_id")
  vas_users_vas_merchant_discount_updated_byTovas_users vas_users?    @relation("vas_merchant_discount_updated_byTovas_users", fields: [updated_by], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "vas_merchant_discount_updated_by_6caf79b5_fk_vas_users_id")

  @@index([discount_type, is_active], map: "vas_merchan_discoun_2c75bd_idx")
  @@index([created_by], map: "vas_merchant_discount_created_by_e2156440")
  @@index([merchant_id], map: "vas_merchant_discount_merchant_id_1c1b1e69")
  @@index([product_id], map: "vas_merchant_discount_product_id_9b8982ec")
  @@index([updated_by], map: "vas_merchant_discount_updated_by_6caf79b5")
}

/// This model has constraints using non-default deferring rules and requires additional setup for migrations. Visit https://pris.ly/d/constraint-deferring for more info.
model vas_merchant_funding {
  amount                                                Decimal       @db.Decimal(12, 2)
  description                                           String
  funding_ref                                           String        @id @db.Uuid
  created_at                                            DateTime?     @db.Timestamptz(6)
  is_approved                                           Boolean
  balance_before                                        Decimal       @db.Decimal(12, 2)
  balance_after                                         Decimal       @db.Decimal(12, 2)
  source                                                String        @db.VarChar(100)
  is_active                                             Boolean
  approved_at                                           DateTime?     @db.Timestamptz(6)
  is_credited                                           Boolean
  approved_by                                           BigInt?
  created_by                                            BigInt
  merchant_id                                           BigInt
  vas_users_vas_merchant_funding_approved_byTovas_users vas_users?    @relation("vas_merchant_funding_approved_byTovas_users", fields: [approved_by], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "vas_merchant_funding_approved_by_c2528eb3_fk_vas_users_id")
  vas_users_vas_merchant_funding_created_byTovas_users  vas_users     @relation("vas_merchant_funding_created_byTovas_users", fields: [created_by], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "vas_merchant_funding_created_by_eedab3c9_fk_vas_users_id")
  vas_merchants                                         vas_merchants @relation(fields: [merchant_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "vas_merchant_funding_merchant_id_80cbb2ea_fk_vas_merchants_id")

  @@index([funding_ref, is_approved, is_active], map: "vas_merchan_funding_64e338_idx")
  @@index([approved_by], map: "vas_merchant_funding_approved_by_c2528eb3")
  @@index([created_by], map: "vas_merchant_funding_created_by_eedab3c9")
  @@index([merchant_id], map: "vas_merchant_funding_merchant_id_80cbb2ea")
}

/// This model has constraints using non-default deferring rules and requires additional setup for migrations. Visit https://pris.ly/d/constraint-deferring for more info.
model vas_merchants {
  id                      BigInt                  @id @default(autoincrement())
  merchant_code           String                  @unique @db.VarChar(10)
  business_name           String                  @db.VarChar(200)
  address                 String?
  city                    String?                 @db.VarChar(100)
  state                   String?                 @db.VarChar(100)
  country                 String?                 @db.VarChar(100)
  website                 String?                 @db.VarChar(100)
  balance_before          Decimal                 @db.Decimal(12, 2)
  current_balance         Decimal                 @db.Decimal(12, 2)
  business_description    String?
  account_type            String                  @db.VarChar(10)
  daily_tranx_limit       String?                 @db.VarChar(200)
  today_tranx_count       String?                 @db.VarChar(200)
  today_tranx_date        DateTime?               @db.Date
  api_secret              String?
  api_key                 String?
  api_key_updated_at      DateTime?               @db.Timestamptz(6)
  api_secret_updated_at   DateTime?               @db.Timestamptz(6)
  is_active               Boolean
  created_at              DateTime?               @db.Timestamptz(6)
  updated_at              DateTime?               @db.Timestamptz(6)
  last_updated_balance_at DateTime?               @db.Timestamptz(6)
  user_id                 BigInt?                 @unique
  api_access_ips          String?                 @db.VarChar
  vas_merchant_discount   vas_merchant_discount[]
  vas_merchant_funding    vas_merchant_funding[]
  vas_users               vas_users?              @relation(fields: [user_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "vas_merchants_user_id_3d406852_fk_vas_users_id")
  vas_transactions        vas_transactions[]

  @@index([merchant_code], map: "merchant_code_index")
  @@index([merchant_code], map: "vas_merchants_merchant_code_357fdfb9_like")
}

model vas_product_categories {
  id               BigInt             @id @default(autoincrement())
  name             String             @db.VarChar(100)
  category_code    String             @unique @db.VarChar(100)
  description      String?
  is_active        Boolean
  created_at       DateTime?          @db.Timestamptz(6)
  updated_at       DateTime?          @db.Timestamptz(6)
  vas_products     vas_products[]
  vas_transactions vas_transactions[]

  @@index([category_code, is_active], map: "vas_product_categor_e6a532_idx")
  @@index([category_code], map: "vas_product_categories_category_code_7203755a_like")
}

/// This model has constraints using non-default deferring rules and requires additional setup for migrations. Visit https://pris.ly/d/constraint-deferring for more info.
model vas_products {
  id                                                                                      BigInt                  @id @default(autoincrement())
  product_name                                                                            String                  @db.VarChar(200)
  product_code                                                                            String                  @unique @db.VarChar(50)
  description                                                                             String
  is_active                                                                               Boolean
  created_at                                                                              DateTime?               @db.Timestamptz(6)
  updated_at                                                                              DateTime?               @db.Timestamptz(6)
  backup_provider_account_id                                                              BigInt?
  category_id                                                                             BigInt
  preferred_provider_account_id                                                           BigInt?
  vas_data_packages                                                                       vas_data_packages[]
  vas_merchant_discount                                                                   vas_merchant_discount[]
  vas_provider_accounts_vas_products_backup_provider_account_idTovas_provider_accounts    vas_provider_accounts?  @relation("vas_products_backup_provider_account_idTovas_provider_accounts", fields: [backup_provider_account_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "vas_products_backup_provider_acco_914a974f_fk_vas_provi")
  vas_product_categories                                                                  vas_product_categories  @relation(fields: [category_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "vas_products_category_id_85b39165_fk_vas_product_categories_id")
  vas_provider_accounts_vas_products_preferred_provider_account_idTovas_provider_accounts vas_provider_accounts?  @relation("vas_products_preferred_provider_account_idTovas_provider_accounts", fields: [preferred_provider_account_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "vas_products_preferred_provider_a_a37422f8_fk_vas_provi")
  vas_transactions                                                                        vas_transactions[]

  @@index([product_code, preferred_provider_account_id, backup_provider_account_id, is_active], map: "vas_product_product_273ff1_idx")
  @@index([backup_provider_account_id], map: "vas_products_backup_provider_account_id_914a974f")
  @@index([category_id], map: "vas_products_category_id_85b39165")
  @@index([preferred_provider_account_id], map: "vas_products_preferred_provider_account_id_a37422f8")
  @@index([product_code], map: "vas_products_product_code_f172055b_like")
}

/// This model has constraints using non-default deferring rules and requires additional setup for migrations. Visit https://pris.ly/d/constraint-deferring for more info.
model vas_provider_accounts {
  id                                                                             BigInt             @id @default(autoincrement())
  account_name                                                                   String             @db.VarChar(50)
  available_balance                                                              Float
  balance_at_provider                                                            Float
  vending_sim                                                                    String?            @db.VarChar(50)
  config                                                                         Json?
  created_at                                                                     DateTime?          @db.Timestamptz(6)
  updated_at                                                                     DateTime?          @db.Timestamptz(6)
  provider_id                                                                    BigInt
  vas_products_vas_products_backup_provider_account_idTovas_provider_accounts    vas_products[]     @relation("vas_products_backup_provider_account_idTovas_provider_accounts")
  vas_products_vas_products_preferred_provider_account_idTovas_provider_accounts vas_products[]     @relation("vas_products_preferred_provider_account_idTovas_provider_accounts")
  vas_providers                                                                  vas_providers      @relation(fields: [provider_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "vas_provider_accounts_provider_id_a6894a8d_fk_vas_providers_id")
  vas_transactions                                                               vas_transactions[]

  @@index([provider_id, account_name], map: "vas_provide_provide_038ab1_idx")
  @@index([provider_id], map: "vas_provider_accounts_provider_id_a6894a8d")
}

model vas_providers {
  id                    BigInt                  @id @default(autoincrement())
  name                  String                  @db.VarChar(200)
  provider_code         String                  @unique @db.VarChar(50)
  description           String?
  config_schema         Json
  is_active             Boolean
  created_at            DateTime?               @db.Timestamptz(6)
  updated_at            DateTime?               @db.Timestamptz(6)
  vas_provider_accounts vas_provider_accounts[]

  @@index([provider_code, is_active], map: "vas_provide_provide_729c89_idx")
  @@index([provider_code], map: "vas_providers_provider_code_a1811428_like")
}

/// This model has constraints using non-default deferring rules and requires additional setup for migrations. Visit https://pris.ly/d/constraint-deferring for more info.
model vas_transactions {
  id                     BigInt                 @id @default(autoincrement())
  amount                 Decimal                @db.Decimal(12, 2)
  discount_amount        Decimal                @db.Decimal(12, 2)
  balance_before         Decimal                @db.Decimal(12, 2)
  balance_after          Decimal                @db.Decimal(12, 2)
  beneficiary_account    String                 @db.VarChar(50)
  description            String
  status                 String                 @db.VarChar(50)
  is_reverse             Boolean
  reversed_at            DateTime?              @db.Timestamptz(6)
  provider_ref           String?                @db.VarChar(230)
  provider_desc          String?                @db.VarChar(230)
  merchant_ref           String                 @unique @db.VarChar(230)
  created_at             DateTime?              @db.Timestamptz(6)
  updated_at             DateTime?              @db.Timestamptz(6)
  merchant_id            BigInt
  product_id             BigInt
  product_category_id    BigInt
  provider_account_id    BigInt?
  vas_merchants          vas_merchants          @relation(fields: [merchant_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "vas_transactions_merchant_id_25345eea_fk_vas_merchants_id")
  vas_product_categories vas_product_categories @relation(fields: [product_category_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "vas_transactions_product_category_id_c99b7e24_fk_vas_produ")
  vas_products           vas_products           @relation(fields: [product_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "vas_transactions_product_id_08d3a684_fk_vas_products_id")
  vas_provider_accounts  vas_provider_accounts? @relation(fields: [provider_account_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "vas_transactions_provider_account_id_9c1207d9_fk_vas_provi")

  @@index([beneficiary_account, status, product_id, provider_ref, merchant_ref, created_at, product_category_id, amount], map: "vas_transac_benefic_fd8906_idx")
  @@index([merchant_id], map: "vas_transactions_merchant_id_25345eea")
  @@index([merchant_ref], map: "vas_transactions_merchant_ref_4a0deec3_like")
  @@index([product_category_id], map: "vas_transactions_product_category_id_c99b7e24")
  @@index([product_id], map: "vas_transactions_product_id_08d3a684")
  @@index([provider_account_id], map: "vas_transactions_provider_account_id_9c1207d9")
}

model vas_users {
  id                                                                BigInt                       @id @default(autoincrement())
  password                                                          String                       @db.VarChar(128)
  last_login                                                        DateTime?                    @db.Timestamptz(6)
  is_superuser                                                      Boolean
  username                                                          String                       @unique @db.VarChar(150)
  first_name                                                        String                       @db.VarChar(150)
  last_name                                                         String                       @db.VarChar(150)
  is_staff                                                          Boolean
  is_active                                                         Boolean
  date_joined                                                       DateTime                     @db.Timestamptz(6)
  email                                                             String                       @unique @db.VarChar(254)
  phone_number                                                      String?                      @db.VarChar(15)
  email_verified                                                    Boolean
  email_verified_at                                                 DateTime?                    @db.Date
  email_verify_token                                                String?                      @db.VarChar(250)
  django_admin_log                                                  django_admin_log[]
  vas_merchant_discount_vas_merchant_discount_created_byTovas_users vas_merchant_discount[]      @relation("vas_merchant_discount_created_byTovas_users")
  vas_merchant_discount_vas_merchant_discount_updated_byTovas_users vas_merchant_discount[]      @relation("vas_merchant_discount_updated_byTovas_users")
  vas_merchant_funding_vas_merchant_funding_approved_byTovas_users  vas_merchant_funding[]       @relation("vas_merchant_funding_approved_byTovas_users")
  vas_merchant_funding_vas_merchant_funding_created_byTovas_users   vas_merchant_funding[]       @relation("vas_merchant_funding_created_byTovas_users")
  vas_merchants                                                     vas_merchants?
  vas_users_groups                                                  vas_users_groups[]
  vas_users_user_permissions                                        vas_users_user_permissions[]

  @@index([email], map: "vas_users_email_78bdc28b_like")
  @@index([username], map: "vas_users_username_4408ed50_like")
}

/// This model has constraints using non-default deferring rules and requires additional setup for migrations. Visit https://pris.ly/d/constraint-deferring for more info.
model vas_users_groups {
  id         BigInt     @id @default(autoincrement())
  user_id    BigInt
  group_id   Int
  auth_group auth_group @relation(fields: [group_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "vas_users_groups_group_id_1cbea9df_fk_auth_group_id")
  vas_users  vas_users  @relation(fields: [user_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "vas_users_groups_user_id_0e9274f0_fk_vas_users_id")

  @@unique([user_id, group_id], map: "vas_users_groups_user_id_group_id_40c1b9aa_uniq")
  @@index([group_id], map: "vas_users_groups_group_id_1cbea9df")
  @@index([user_id], map: "vas_users_groups_user_id_0e9274f0")
}

/// This model has constraints using non-default deferring rules and requires additional setup for migrations. Visit https://pris.ly/d/constraint-deferring for more info.
model vas_users_user_permissions {
  id              BigInt          @id @default(autoincrement())
  user_id         BigInt
  permission_id   Int
  auth_permission auth_permission @relation(fields: [permission_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "vas_users_user_permi_permission_id_46de1d94_fk_auth_perm")
  vas_users       vas_users       @relation(fields: [user_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "vas_users_user_permissions_user_id_ecf93b24_fk_vas_users_id")

  @@unique([user_id, permission_id], map: "vas_users_user_permissions_user_id_permission_id_4c525f84_uniq")
  @@index([permission_id], map: "vas_users_user_permissions_permission_id_46de1d94")
  @@index([user_id], map: "vas_users_user_permissions_user_id_ecf93b24")
}
